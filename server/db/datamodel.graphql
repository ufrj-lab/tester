type View {
   id: ID! @id

   welcome: Welcome! @relation(link: INLINE)
   company: Company! @relation(link: INLINE)

   menus: [Menu!]! @relation(link: INLINE)

   tests: [Test!]! @relation(link: INLINE)
   steps: [Step!]! @relation(link: INLINE)
}

type Welcome {
   id: ID! @id

   title: String!
   message: String!
}

type Company {
   id: ID! @id

   name: String!
   abbr: String

   logo: String
}

type Test {
   id: ID! @id

   title: String!

   steps: [Step!]! @relation(link: INLINE)
   menus: [Menu!]! @relation(link: INLINE)

   results: [TestResult!]!
}

type Menu {
   id: ID! @id

   root: Boolean! @default(value: false)

   menus: [Menu!]! @relation(name: "SubMenu")

   name: String!

   items: [Menu!]! @relation(link: INLINE, name: "SubMenu")
}

type Path {
   id: ID! @id
   parent: Step!
   paths: [Menu!]! @relation(link: INLINE)
}

type Keys {
   id: ID! @id
   userType: [KeyUserType!]! @relation(link: INLINE)
   resultStatus: [KeyResultStatus!]! @relation(link: INLINE)
}

type KeyUserType {
   id: ID! @id
   key: String! @unique
   steps: [Step!]!
}

type KeyResultStatus {
   id: ID! @id
   key: String! @unique
   results: [TestResult!]!
}

type Step {
   id: ID! @id

   parent: Test

   type: [KeyUserType!]! @relation(link: INLINE)

   question: String!

   targets: [Menu!]! @relation(link: INLINE, name: "StepTarget")

   paths: [Path!]! @relation(link: INLINE)

   results: [StepResult!]!
}

type TestResult {
   id: ID! @id

   parent: Test! @relation(link: INLINE)

   start: DateTime!
   end: DateTime

   time: TimeResult @relation(link: INLINE)

   steps: [StepResult!]! @relation(link: INLINE)

   status: KeyResultStatus! @relation(link: INLINE)
}

type TimeResult {
   id: ID! @id

   int: Int!
   text: String!
}

type StepResult {
   id: ID! @id

   parent: Step! @relation(link: INLINE)

   resultParent: TestResult!

   start: DateTime!
   end: DateTime

   time: TimeResult @relation(link: INLINE)

   path: [Menu!]! @relation(link: INLINE)

   status: KeyResultStatus! @relation(link: INLINE)
}
